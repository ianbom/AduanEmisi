import{j as e,r as l,J as qe,S as y}from"./app-CoH15XZe.js";import{C as S}from"./CitizenLayout-lHNe3MoP.js";import{e as W,f as Le,b as Ve,B as q,a as Be}from"./Footer-BKK-BSje.js";import{u as J,e as Fe,c as p,f as Y,P as U,C as k,a as C,B as j,b as L,d as V}from"./index-CJhcQlSm.js";import{c as X,R as Ge,P as He,W as Ke,C as We,T as Je,D as Ye,a as Z,O as Ue,b as Xe}from"./index-BDWXRfeN.js";import{A as B}from"./arrow-left-BpOagMmJ.js";import{C as Ze}from"./clock-BorN6t7o.js";import{c as ee}from"./createLucideIcon-CBxYhp_w.js";import{A as ea}from"./arrow-right-CJEQ3Nzn.js";import"./heart-CN1gok8B.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=ee("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var ae="AlertDialog",[aa,Ra]=W(ae,[X]),h=X(),se=a=>{const{__scopeAlertDialog:s,...t}=a,i=h(s);return e.jsx(Ge,{...i,...t,modal:!0})};se.displayName=ae;var sa="AlertDialogTrigger",ta=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,r=h(t);return e.jsx(Xe,{...r,...i,ref:s})});ta.displayName=sa;var ra="AlertDialogPortal",te=a=>{const{__scopeAlertDialog:s,...t}=a,i=h(s);return e.jsx(He,{...i,...t})};te.displayName=ra;var ia="AlertDialogOverlay",re=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,r=h(t);return e.jsx(Ue,{...r,...i,ref:s})});re.displayName=ia;var b="AlertDialogContent",[la,na]=aa(b),oa=Fe("AlertDialogContent"),ie=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,children:i,...r}=a,c=h(t),o=l.useRef(null),d=J(s,o),m=l.useRef(null);return e.jsx(Ke,{contentName:b,titleName:le,docsSlug:"alert-dialog",children:e.jsx(la,{scope:t,cancelRef:m,children:e.jsxs(We,{role:"alertdialog",...c,...r,ref:d,onOpenAutoFocus:Le(r.onOpenAutoFocus,g=>{var N;g.preventDefault(),(N=m.current)==null||N.focus({preventScroll:!0})}),onPointerDownOutside:g=>g.preventDefault(),onInteractOutside:g=>g.preventDefault(),children:[e.jsx(oa,{children:i}),e.jsx(ca,{contentRef:o})]})})})});ie.displayName=b;var le="AlertDialogTitle",ne=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,r=h(t);return e.jsx(Je,{...r,...i,ref:s})});ne.displayName=le;var oe="AlertDialogDescription",de=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,r=h(t);return e.jsx(Ye,{...r,...i,ref:s})});de.displayName=oe;var da="AlertDialogAction",ce=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,r=h(t);return e.jsx(Z,{...r,...i,ref:s})});ce.displayName=da;var me="AlertDialogCancel",ue=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...i}=a,{cancelRef:r}=na(me,t),c=h(t),o=J(s,r);return e.jsx(Z,{...c,...i,ref:o})});ue.displayName=me;var ca=({contentRef:a})=>{const s=`\`${b}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${b}\` by passing a \`${oe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${b}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var i;document.getElementById((i=a.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},ma=se,ua=te,xe=re,ge=ie,pe=ce,he=ue,fe=ne,ve=de;const G=ma,xa=ua,be=l.forwardRef(({className:a,...s},t)=>e.jsx(xe,{className:p("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",a),...s,ref:t}));be.displayName=xe.displayName;const P=l.forwardRef(({className:a,...s},t)=>e.jsxs(xa,{children:[e.jsx(be,{}),e.jsx(ge,{ref:t,className:p("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",a),...s})]}));P.displayName=ge.displayName;const E=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",a),...s});E.displayName="AlertDialogHeader";const R=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});R.displayName="AlertDialogFooter";const z=l.forwardRef(({className:a,...s},t)=>e.jsx(fe,{ref:t,className:p("text-lg font-semibold",a),...s}));z.displayName=fe.displayName;const $=l.forwardRef(({className:a,...s},t)=>e.jsx(ve,{ref:t,className:p("text-muted-foreground text-sm",a),...s}));$.displayName=ve.displayName;const T=l.forwardRef(({className:a,...s},t)=>e.jsx(pe,{ref:t,className:p(Y(),a),...s}));T.displayName=pe.displayName;const Q=l.forwardRef(({className:a,...s},t)=>e.jsx(he,{ref:t,className:p(Y({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));Q.displayName=he.displayName;var O="Progress",I=100,[ga,za]=W(O),[pa,ha]=ga(O),je=l.forwardRef((a,s)=>{const{__scopeProgress:t,value:i=null,max:r,getValueLabel:c=fa,...o}=a;(r||r===0)&&!H(r)&&console.error(va(`${r}`,"Progress"));const d=H(r)?r:I;i!==null&&!K(i,d)&&console.error(ba(`${i}`,"Progress"));const m=K(i,d)?i:null,g=w(m)?c(m,d):void 0;return e.jsx(pa,{scope:t,value:m,max:d,children:e.jsx(U.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":w(m)?m:void 0,"aria-valuetext":g,role:"progressbar","data-state":we(m,d),"data-value":m??void 0,"data-max":d,...o,ref:s})})});je.displayName=O;var Ne="ProgressIndicator",ye=l.forwardRef((a,s)=>{const{__scopeProgress:t,...i}=a,r=ha(Ne,t);return e.jsx(U.div,{"data-state":we(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...i,ref:s})});ye.displayName=Ne;function fa(a,s){return`${Math.round(a/s*100)}%`}function we(a,s){return a==null?"indeterminate":a===s?"complete":"loading"}function w(a){return typeof a=="number"}function H(a){return w(a)&&!isNaN(a)&&a>0}function K(a,s){return w(a)&&!isNaN(a)&&a<=s&&a>=0}function va(a,s){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${I}\`.`}function ba(a,s){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${I} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ae=je,ja=ye;const De=l.forwardRef(({className:a,value:s,...t},i)=>e.jsx(Ae,{ref:i,className:p("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...t,children:e.jsx(ja,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));De.displayName=Ae.displayName;const Na=({quiz:a,onSubmitQuiz:s,onExitQuiz:t,timeLimit:i=30})=>{const[r,c]=l.useState(0),[o,d]=l.useState({}),[m,g]=l.useState(i*60),[N,A]=l.useState(!1),[Se,D]=l.useState(!1),[ke,Ce]=l.useState(!1),x=a.questions[r],f=a.questions.length,v=Object.keys(o).length,_e=(r+1)/f*100;l.useEffect(()=>{const n=setInterval(()=>{g(u=>u<=1?(M(),0):u-1)},1e3);return()=>clearInterval(n)},[]);const Pe=n=>{const u=Math.floor(n/60),Me=n%60;return`${u}:${Me.toString().padStart(2,"0")}`},Ee=n=>{switch(n){case"mudah":return"bg-green-100 text-green-700 border-green-200";case"sedang":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"sulit":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},Re=n=>{switch(n){case"mudah":return"Mudah";case"sedang":return"Sedang";case"sulit":return"Sulit";default:return n}},ze=n=>{d(u=>({...u,[x.id]:n}))},$e=()=>{r<f-1&&c(r+1)},Te=()=>{r>0&&c(r-1)},Qe=n=>{c(n)},M=()=>{Ce(!0),s(o)},Oe=()=>{A(!1),t()},Ie=()=>m>300?"text-green-600":m>60?"text-yellow-600":"text-red-600";return ke?e.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8",children:e.jsx(k,{className:"text-center",children:e.jsx(C,{className:"py-12",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:e.jsx(Ve,{className:"h-8 w-8 text-green-600"})}),e.jsx("h2",{className:"mb-2 text-2xl font-bold text-gray-900",children:"Quiz Selesai!"}),e.jsx("p",{className:"text-gray-600",children:"Jawaban Anda sedang diproses..."})]})})})}):e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>A(!0),className:"flex items-center",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Keluar"]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`flex items-center font-mono text-lg font-bold ${Ie()}`,children:[e.jsx(Ze,{className:"mr-2 h-5 w-5"}),Pe(m)]}),e.jsxs(j,{onClick:()=>D(!0),className:"bg-emerald-600 hover:bg-emerald-700",disabled:v===0,children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Selesai"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"relative mb-2 overflow-hidden rounded-lg bg-gradient-to-r from-emerald-500 to-emerald-600 px-4 py-4 shadow-lg",children:e.jsxs("div",{className:"relative z-10 flex items-start justify-between p-5",children:[e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("h1",{className:"mb-2 line-clamp-2 text-2xl font-bold leading-tight text-white",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(q,{className:`${Ee(a.difficulty)} shadow-sm`,children:Re(a.difficulty)}),e.jsxs(q,{className:"flex items-center gap-1 bg-yellow-100 text-yellow-800",children:[e.jsx(Be,{size:12,className:"text-yellow-500"}),a.points_reward," Poin"]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-xl border border-white/30 bg-white/20 backdrop-blur-sm",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.2 3-3.3 3-5.7 0-3.9-3.1-7-7-7z"})})})})]})}),e.jsxs("div",{className:"mb-2 flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Pertanyaan ",r+1," dari"," ",f]}),e.jsxs("span",{children:[v," dari ",f," terjawab"]})]}),e.jsx(De,{value:_e,className:"h-2 [&>div]:bg-emerald-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(k,{className:"sticky top-6",children:[e.jsx(L,{children:e.jsx(V,{className:"text-lg",children:"Navigasi Soal"})}),e.jsxs(C,{children:[e.jsx("div",{className:"grid grid-cols-5 gap-2 lg:grid-cols-4",children:a.questions.map((n,u)=>e.jsx("button",{onClick:()=>Qe(u),className:`aspect-square rounded border-2 text-sm font-medium transition-colors ${r===u?"border-sky-500 bg-sky-100 text-sky-700":o[n.id]?"border-green-500 bg-green-100 text-green-700":"border-gray-300 bg-gray-100 text-gray-700 hover:border-gray-400"}`,children:u+1},n.id))}),e.jsxs("div",{className:"mt-4 space-y-2 text-xs text-gray-600",children:[e.jsx("p",{children:"Keterangan:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded border-2 border-sky-500 bg-sky-100"}),"Soal saat ini"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded border-2 border-green-500 bg-green-100"}),"Sudah dijawab"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded border-2 border-gray-300 bg-gray-100"}),"Belum dijawab"]})]})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(k,{className:"bg-emerald-100",children:[e.jsx(L,{children:e.jsxs(V,{className:"text-xl text-emerald-800",children:["Pertanyaan ",r+1]})}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-2xl font-semibold leading-relaxed text-gray-900",children:x.question_text}),x.question_image_url&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:x.question_image_url.startsWith("/storage/")?x.question_image_url:`/storage/${x.question_image_url}`,alt:"Question illustration",className:"max-h-64 rounded-lg border"})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:x.answers.map((n,u)=>e.jsx("button",{onClick:()=>ze(n.id),className:`w-full rounded-lg border-2 p-4 text-left transition-all ${o[x.id]===n.id?"border-emerald-700 bg-emerald-700":"border-emerald-200 bg-white hover:scale-105 hover:border-emerald-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`mt-1 flex h-6 w-6 items-center justify-center rounded-md border-2 p-4 text-sm font-bold ${o[x.id]===n.id?"border-emerald-200 bg-emerald-200 text-emerald-900":"border-emerald-200 bg-white text-emerald-700"}`,children:String.fromCharCode(65+u)}),e.jsxs("div",{className:"flex-1",children:[n.image_url&&e.jsx("img",{src:n.image_url.startsWith("/storage/")?n.image_url:`/storage/${n.image_url}`,alt:`Option ${String.fromCharCode(65+u)}`,className:"mb-2 max-h-32 rounded"}),n.answer_text&&e.jsx("p",{className:`font-medium ${o[x.id]===n.id?"text-white":"text-black"}`,children:n.answer_text})]})]})},n.id))}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-6",children:[e.jsxs(j,{variant:"outline",onClick:Te,disabled:r===0,children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Sebelumnya"]}),r===f-1?e.jsxs(j,{onClick:()=>D(!0),className:"bg-emerald-600 hover:bg-emerald-700",disabled:v===0,children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Selesaikan Quiz"]}):e.jsxs(j,{onClick:$e,className:"bg-emerald-600 hover:bg-emerald-700",children:["Selanjutnya",e.jsx(ea,{className:"ml-2 h-4 w-4"})]})]})]})]})})]}),e.jsx(G,{open:N,onOpenChange:A,children:e.jsxs(P,{children:[e.jsxs(E,{children:[e.jsxs(z,{className:"flex items-center",children:[e.jsx(F,{className:"mr-2 h-5 w-5 text-amber-500"}),"Keluar dari Quiz?"]}),e.jsx($,{children:"Apakah Anda yakin ingin keluar? Semua jawaban yang sudah Anda pilih akan hilang dan tidak dapat dikembalikan."})]}),e.jsxs(R,{children:[e.jsx(Q,{children:"Batal"}),e.jsx(T,{onClick:Oe,className:"bg-red-600 hover:bg-red-700",children:"Ya, Keluar"})]})]})}),e.jsx(G,{open:Se,onOpenChange:D,children:e.jsxs(P,{children:[e.jsxs(E,{children:[e.jsxs(z,{className:"flex items-center",children:[e.jsx(_,{className:"mr-2 h-5 w-5 text-emerald-500"}),"Selesaikan Quiz?"]}),e.jsx($,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:["Anda telah menjawab ",v," dari"," ",f," pertanyaan."]}),v<f&&e.jsxs("p",{className:"text-amber-600",children:[e.jsx(F,{className:"mr-1 inline h-4 w-4"}),f-v," ","pertanyaan belum dijawab dan akan dianggap salah."]}),e.jsx("p",{children:"Apakah Anda yakin ingin menyelesaikan quiz ini?"})]})})]}),e.jsxs(R,{children:[e.jsx(Q,{children:"Batal"}),e.jsx(T,{onClick:M,className:"bg-emerald-600 hover:bg-emerald-700",children:"Ya, Selesaikan"})]})]})})]})},$a=()=>{const{props:a}=qe(),s=a.quiz,t=a.timeLimit||30;l.useEffect(()=>{s.is_active||y.visit(route("quiz.index"),{onError:()=>{window.history.back()}})},[s.is_active]),l.useEffect(()=>{s.questions.length===0&&y.visit(route("quiz.index"),{onError:()=>{window.history.back()}})},[s.questions.length]);const i=c=>{y.post(route("quiz.submit",{id:s.id}),{answers:c},{onSuccess:o=>{},onError:o=>{console.error("Error submitting quiz:",o)},preserveState:!1})},r=()=>{y.visit(route("quiz.index"),{onError:()=>{window.history.back()}})};return l.useEffect(()=>{const c=d=>(d.preventDefault(),d.returnValue="Apakah Anda yakin ingin meninggalkan halaman? Jawaban Anda akan hilang.",d.returnValue),o=d=>{confirm("Apakah Anda yakin ingin meninggalkan quiz? Jawaban Anda akan hilang.")||(d.preventDefault(),window.history.pushState(null,"",window.location.href))};return window.addEventListener("beforeunload",c),window.addEventListener("popstate",o),window.history.pushState(null,"",window.location.href),()=>{window.removeEventListener("beforeunload",c),window.removeEventListener("popstate",o)}},[]),!s||!s.questions||s.questions.length===0?e.jsx(S,{currentPage:"quiz",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center py-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-emerald-600"}),e.jsx("p",{className:"text-gray-600",children:"Memuat quiz..."})]})})})}):s.is_active?(console.log("Quiz data:",s),e.jsx(S,{currentPage:"quiz",children:e.jsx(Na,{quiz:s,onSubmitQuiz:i,onExitQuiz:r,timeLimit:t})})):e.jsx(S,{currentPage:"quiz",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8",children:e.jsxs("div",{className:"py-32 text-center",children:[e.jsx("h2",{className:"mb-4 text-2xl font-bold text-gray-900",children:"Quiz Tidak Tersedia"}),e.jsx("p",{className:"mb-8 text-gray-600",children:"Quiz ini sedang tidak aktif dan tidak dapat dikerjakan."}),e.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-emerald-600 px-6 py-2 text-white hover:bg-emerald-700",children:"Kembali"})]})})})};export{$a as default};
