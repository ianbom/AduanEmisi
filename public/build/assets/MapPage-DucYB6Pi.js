import{r as v,j as e}from"./app-CEf6-TVv.js";import{c as b,B as g}from"./CitizenLayout-BJCqtu_4.js";import{B as m,C as y,a as w}from"./index-T59oawn7.js";import{S as o,a as x,b as h,c as u,d as a}from"./select-D_0_1Ftm.js";import{g as k}from"./reportStatusColor-DlK-Ifkc.js";import{c as S,l as C,a as P,M as L,T as z,b as M,L as N}from"./TileLayer-D56C_8QM.js";import{F as K,E as F}from"./filter-C-AgaYYg.js";import{M as T}from"./map-pin-CvMsSeln.js";import{C as B}from"./calendar-BDxQ4HCg.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=b("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),U=S(function(n,l){const i=new C.Popup(n,l.overlayContainer);return P(i,l)},function(n,l,{position:i},c){v.useEffect(function(){const{instance:t}=n;function s(r){r.popup===t&&(t.update(),c(!0))}function d(r){r.popup===t&&c(!1)}return l.map.on({popupopen:s,popupclose:d}),l.overlayContainer==null?(i!=null&&t.setLatLng(i),t.openOn(l.map)):l.overlayContainer.bindPopup(t),function(){var f;l.map.off({popupopen:s,popupclose:d}),(f=l.overlayContainer)==null||f.unbindPopup(),l.map.removeLayer(t)}},[n,l,c,i])});delete N.Icon.Default.prototype._getIconUrl;N.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png"});const H=({reports:p,provinces:n,cities:l,districts:i,onViewReport:c})=>{const[j,t]=v.useState(!1);return e.jsxs("div",{className:"flex h-screen flex-col lg:flex-row",children:[e.jsx("div",{className:`bg-white shadow-lg transition-all duration-300 ${j?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"} overflow-hidden lg:relative lg:max-h-full lg:w-80 lg:border-r lg:border-gray-200 lg:opacity-100`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h2",{className:"flex items-center text-xl font-semibold text-gray-900",children:[e.jsx(K,{size:20,className:"mr-2 text-emerald-600"}),"Filter"]}),e.jsx(m,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>t(!1),children:"×"})]}),e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kategori Laporan"}),e.jsxs(o,{children:[e.jsx(x,{children:e.jsx(h,{placeholder:"Semua kategori"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Kategori"}),e.jsx(a,{value:"pencemaran-air",children:"Pencemaran Air"}),e.jsx(a,{value:"pencemaran-laut",children:"Pencemaran Laut"}),e.jsx(a,{value:"kerusakan-hutan",children:"Kerusakan Hutan"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status Laporan"}),e.jsxs(o,{children:[e.jsx(x,{children:e.jsx(h,{placeholder:"Semua status"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Status"}),e.jsx(a,{value:"menunggu",children:"Menunggu"}),e.jsx(a,{value:"progress",children:"Dalam Progress"}),e.jsx(a,{value:"selesai",children:"Selesai"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provinsi"}),e.jsxs(o,{children:[e.jsx(x,{children:e.jsx(h,{placeholder:"Semua Provinsi"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Provinsi"}),n.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kota"}),e.jsxs(o,{children:[e.jsx(x,{children:e.jsx(h,{placeholder:"Semua Kota"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Kota"}),l.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kecamatan"}),e.jsxs(o,{children:[e.jsx(x,{children:e.jsx(h,{placeholder:"Semua Kecamatan"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Kecamatan"}),i.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(m,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:"Terapkan Filter"}),e.jsx(m,{variant:"outline",className:"flex-1",children:"Reset Filter"})]})]})]})}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"p-4 lg:hidden",children:e.jsx(m,{onClick:()=>t(!j),className:"w-full bg-emerald-600 text-white",children:j?"Tutup Filter":"Tampilkan Filter"})}),e.jsxs(L,{center:[-2.5489,118.0149],zoom:5,scrollWheelZoom:!0,className:"z-10 h-full w-full",children:[e.jsx(z,{attribution:'© <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),p.map(s=>{var d,r;return e.jsx(M,{position:[s.latitude,s.longitude],children:e.jsx(U,{className:"custom-popup",minWidth:280,maxWidth:320,closeButton:!0,autoPan:!0,children:e.jsxs("div",{className:"relative overflow-hidden rounded-lg bg-white shadow-lg",children:[e.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-emerald-500 to-teal-600",children:[(d=s.media)!=null&&d[0]?(r=s.media[0].media_type)!=null&&r.startsWith("video")?e.jsxs("div",{className:"relative h-full w-full bg-black",children:[e.jsx("video",{className:"h-full w-full object-cover opacity-50",src:`/storage/${s.media[0].media_url}`,muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"rounded-full bg-white/80 p-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-5.197-3.03A1 1 0 008 9.03v5.94a1 1 0 001.555.832l5.197-3.03a1 1 0 000-1.664z"})})})})]}):e.jsx("img",{src:`/storage/${s.media[0].media_url}`,alt:s.title,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full items-center justify-center bg-gray-800",children:e.jsx("svg",{className:"h-8 w-8 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx(g,{className:`${k(s.status)} text-xs font-medium shadow-sm`,children:s.status})}),s.hasMission&&e.jsx("div",{className:"absolute left-2 top-2",children:e.jsx(g,{className:"bg-blue-500 text-xs font-medium text-white shadow-sm",children:"Ada Misi"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(g,{variant:"outline",className:"border-gray-200 bg-gray-50 text-xs font-medium text-gray-700",children:s.category})}),e.jsx("h3",{className:"mb-3 line-clamp-2 text-base font-semibold leading-tight text-gray-900",children:s.title}),e.jsxs("div",{className:"mb-3 flex items-start text-sm text-gray-600",children:[e.jsx(T,{size:14,className:"mr-2 mt-0.5 flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"line-clamp-2",children:s.address})]}),e.jsxs("div",{className:"mb-4 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{size:12,className:"mr-1"}),e.jsx("span",{children:s.created_at})]}),e.jsxs("div",{className:"flex items-center text-emerald-600",children:[e.jsx(E,{size:12,className:"mr-1"}),e.jsx("span",{className:"font-medium",children:s.upvotes_count||0})]})]}),e.jsxs(m,{size:"sm",onClick:()=>c(s.id),className:"w-full bg-emerald-600 text-white transition-colors duration-200 hover:bg-emerald-700",children:[e.jsx(F,{size:14,className:"mr-2"}),"Lihat Detail"]})]})]})})},s.id)})]}),e.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:e.jsx(y,{className:"bg-white/90 shadow-lg backdrop-blur-sm",children:e.jsxs(w,{className:"p-3 text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[p.length," Laporan Ditemukan"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Klik marker untuk lihat detail"})]})})})]})]})};export{H as M};
