import{r as P,j as e,S as g,t as p,J as B}from"./app-CEf6-TVv.js";import{A as L,a as I,b as S,F as k,T as A,B as f,H as z,C as M}from"./CitizenLayout-BJCqtu_4.js";import{C as t,a as l,B as i,b as D,d as R}from"./index-T59oawn7.js";import{M as K,P as U,a as E,C as _,T as H,b as O,c as $,d as x,e as m,A as F,g as G}from"./badgeRarityColor-b9LohN2a.js";import{f as N}from"./formatDate-DdkzSpcV.js";import{M as J}from"./map-pin-CvMsSeln.js";import{C as W}from"./calendar-BDxQ4HCg.js";import{A as o,M as V}from"./map-B41fRnfh.js";import{P as q}from"./plus-b3oEZY1A.js";const Q=({user:s,myReports:r,myReportsCount:n,myMissions:d,myMissionCounts:c})=>{var y,b,u,w;const[v,h]=P.useState("reports");console.log(c),console.log(d),console.log(n);const T=[{label:"LAPORAN DIBUAT",value:n??0,icon:k,color:"text-blue-600"},{label:"MISI DIIKUTI",value:c??0,icon:A,color:"text-green-600"},{label:"KOLEKSI BADGE",value:"20",icon:H,color:"text-purple-600"}],C=[{id:1,title:"Pelapor Aktif",description:"Membuat 10+ laporan lingkungan",icon:"🏆",dateReceived:"2024-01-15",rarity:"Gold"},{id:2,title:"Penggerak Komunitas",description:"Mengikuti 5+ misi volunteer",icon:"🤝",dateReceived:"2024-01-10",rarity:"Silver"},{id:3,title:"Pelindung Sungai",description:"Melaporkan 3+ kasus pencemaran air",icon:"🌊",dateReceived:"2024-01-05",rarity:"Bronze"}];return e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsx(t,{className:"mb-8",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-start gap-8 lg:flex-row lg:items-start",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsxs(L,{className:"h-24 w-24",children:[e.jsx(I,{src:s!=null&&s.profile_url?`/storage/${s.profile_url}`:void 0}),e.jsx(S,{className:"bg-emerald-100 text-xl font-semibold text-emerald-700",children:((y=s==null?void 0:s.name)==null?void 0:y.charAt(0).toUpperCase())||"U"})]})}),e.jsxs("a",{href:"/edit-profile",className:"inline-flex items-center rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors duration-200 hover:bg-emerald-700",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]})]}),e.jsxs("div",{className:"w-full flex-1",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:(s==null?void 0:s.name)||"User Name"})}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-gray-800",children:"Informasi Kontak"}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg bg-gray-50 p-3",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(K,{size:16,className:"text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Email"}),e.jsx("p",{className:"truncate text-sm font-medium text-gray-900",children:(s==null?void 0:s.email)||"Tidak tersedia"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg bg-gray-50 p-3",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:e.jsx(U,{size:16,className:"text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Telepon"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(s==null?void 0:s.phone)||"Tidak tersedia"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-gray-800",children:"Informasi Lokasi"}),e.jsxs("div",{className:"flex items-start space-x-3 rounded-lg bg-gray-50 p-3",children:[e.jsx("div",{className:"mt-0.5 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-red-100",children:e.jsx(J,{size:16,className:"text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Wilayah"}),e.jsx("p",{className:"text-sm font-medium leading-relaxed text-gray-900",children:[(b=s==null?void 0:s.district)==null?void 0:b.name,(u=s==null?void 0:s.city)==null?void 0:u.name,(w=s==null?void 0:s.province)==null?void 0:w.name].filter(Boolean).join(", ")||"Tidak tersedia"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 rounded-lg bg-gray-50 p-3",children:[e.jsx("div",{className:"mt-0.5 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(E,{size:16,className:"text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Alamat"}),e.jsx("p",{className:"text-sm font-medium leading-relaxed text-gray-900",children:(s==null?void 0:s.address)||"Tidak tersedia"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-100 pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(W,{size:14,className:"text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Bergabung"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:N((s==null?void 0:s.created_at)||"")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(_,{size:14,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Terakhir Diperbarui"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:N((s==null?void 0:s.updated_at)||"")})]})]})]})})]})]})})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"Kilas Balik Kontribusi Anda"}),e.jsx("div",{className:"mb-6 grid gap-6 md:grid-cols-3",children:T.map((a,j)=>e.jsx(t,{className:"transition-shadow hover:shadow-lg",children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx(a.icon,{className:`h-8 w-8 ${a.color} mx-auto mb-3`}),e.jsx("div",{className:"mb-1 text-3xl font-bold text-gray-900",children:a.label==="LAPORAN DIBUAT"&&(a.value??0)}),e.jsx("div",{className:"text-sm text-gray-600",children:a.label}),a.label==="LAPORAN DIBUAT"?n===0?e.jsxs(i,{variant:"ghost",size:"sm",className:"mt-2 text-xs",onClick:()=>g.visit("/report-create"),children:["Buat Sekarang",e.jsx(o,{className:"ml-1 h-3 w-3"})]}):e.jsxs(i,{variant:"ghost",size:"sm",className:"mt-2 text-xs",onClick:()=>g.visit("/report"),children:["Lihat Semua",e.jsx(o,{className:"ml-1 h-3 w-3"})]}):a.label==="MISI DIIKUTI"?c===0||c===void 0?e.jsxs(i,{variant:"ghost",size:"sm",className:"mt-2 text-xs",onClick:()=>g.visit("/mission"),children:["Cari Misi",e.jsx(o,{className:"ml-1 h-3 w-3"})]}):e.jsxs(i,{variant:"ghost",size:"sm",className:"mt-2 text-xs",onClick:()=>g.visit("/my-mission"),children:["Lihat Semua",e.jsx(o,{className:"ml-1 h-3 w-3"})]}):e.jsxs(i,{variant:"ghost",size:"sm",className:"mt-2 text-xs",children:["Lihat Semua",e.jsx(o,{className:"ml-1 h-3 w-3"})]})]})},j))}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(p,{href:"/report-create",children:e.jsx(t,{className:"h-full cursor-pointer transition-shadow hover:shadow-lg",children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx(q,{className:"mx-auto mb-3 h-12 w-12 text-green-600"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:"LAPORKAN ISU BARU"}),e.jsx("p",{className:"text-gray-600",children:"Laporkan masalah lingkungan yang Anda temui"})]})})}),e.jsx(p,{href:"/map",children:e.jsx(t,{className:"h-full cursor-pointer transition-shadow hover:shadow-lg",children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx(V,{className:"mx-auto mb-3 h-12 w-12 text-blue-600"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:"LIHAT PETA LAPORAN"}),e.jsx("p",{className:"text-gray-600",children:"Jelajahi laporan lingkungan di peta interaktif"})]})})})]})]}),e.jsxs(t,{children:[e.jsx(D,{children:e.jsx(R,{children:"Riwayat Aktivitas Detail"})}),e.jsx(l,{children:e.jsxs(O,{value:v,onValueChange:h,children:[e.jsxs($,{className:"grid w-full grid-cols-5",children:[e.jsx(x,{value:"reports",children:"Laporan Saya"}),e.jsx(x,{value:"missions",children:"Misi Saya"}),e.jsx(x,{value:"donations",children:"Donasi Saya"}),e.jsx(x,{value:"certificates",children:"Sertifikat Saya"}),e.jsx(x,{value:"badges",children:"Koleksi Badges"})]}),e.jsx(m,{value:"reports",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:(r==null?void 0:r.length)>0?r.map(a=>e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600",children:a.address}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:N(a.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{variant:a.status==="Completed"?"default":"secondary",children:a.status}),e.jsx(p,{href:`/report/${a.id}`,children:e.jsx(i,{variant:"outline",size:"sm",children:"Lihat Detail"})})]})]})})},a.id)):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(k,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Belum ada riwayat laporan"})]})})}),e.jsx(m,{value:"missions",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:d.length>0?d.map(a=>{var j;return e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Peran:"," ",(j=a.pivot)!=null&&j.is_leader?"Ketua Tim":"Anggota Tim"]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:N(a.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{variant:a.status==="Completed"?"default":"secondary",children:a.status}),e.jsx(p,{href:`/report/${a.id}`,children:e.jsx(i,{variant:"outline",size:"sm",children:"Lihat Detail"})})]})]})})},a.id)}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(A,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Belum ada riwayat misi"})]})})}),e.jsx(m,{value:"donations",className:"mt-6",children:e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(z,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Belum ada riwayat donasi"})]})}),e.jsx(m,{value:"certificates",className:"mt-6",children:e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(F,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Belum ada sertifikat yang diterima"})]})}),e.jsx(m,{value:"badges",className:"mt-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:C.map(a=>e.jsx(t,{className:`border-2 ${G(a.rarity)}`,children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-3 text-4xl",children:a.icon}),e.jsx("h3",{className:"mb-2 font-semibold text-gray-900",children:a.title}),e.jsx("p",{className:"mb-3 text-sm text-gray-600",children:a.description}),e.jsx(f,{variant:"outline",className:"mb-2",children:a.rarity}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Diterima:"," ",a.dateReceived]})]})},a.id))})})]})})]})]})})},re=()=>{var h;const{props:s}=B(),r=((h=s.auth)==null?void 0:h.user)??null,n=s.myReports,d=s.myReportsCount,c=s.myMissions,v=s.myMissionCounts;return e.jsx(M,{currentPage:"profile",children:e.jsx(Q,{user:r,myReports:n,myReportsCount:d,myMissions:c,myMissionCounts:v})})};export{re as default};
