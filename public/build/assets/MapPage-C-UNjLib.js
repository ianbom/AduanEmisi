import{r as v,j as e}from"./app-ATs5ISiJ.js";import{B as j}from"./CitizenLayout-CMNJ2BA9.js";import{B as p,C as b,a as y}from"./card-BBmrTWXU.js";import{S as d,a as o,b as x,c as u,d as a}from"./select-CCZS_z3t.js";import{g as w}from"./reportStatusColor-7aXPgF-z.js";import{c as k,l as S,a as C,M as P,T as L,b as z,L as N}from"./TileLayer-tGd8h-1l.js";import{F as M,E as K}from"./filter-_Oe6nhd3.js";import{M as B}from"./map-pin-LoYpawZ8.js";import{C as E}from"./calendar-BV9l0Mbb.js";import{c as F}from"./file-text-DNWXWrmL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),U=k(function(n,l){const i=new S.Popup(n,l.overlayContainer);return C(i,l)},function(n,l,{position:i},c){v.useEffect(function(){const{instance:t}=n;function s(r){r.popup===t&&(t.update(),c(!0))}function m(r){r.popup===t&&c(!1)}return l.map.on({popupopen:s,popupclose:m}),l.overlayContainer==null?(i!=null&&t.setLatLng(i),t.openOn(l.map)):l.overlayContainer.bindPopup(t),function(){var f;l.map.off({popupopen:s,popupclose:m}),(f=l.overlayContainer)==null||f.unbindPopup(),l.map.removeLayer(t)}},[n,l,c,i])});delete N.Icon.Default.prototype._getIconUrl;N.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png"});const Z=({reports:h,provinces:n,cities:l,districts:i,onViewReport:c})=>{const[g,t]=v.useState(!1);return e.jsxs("div",{className:"flex h-screen",children:[e.jsx("div",{className:`w-80 border-r border-gray-200 bg-white shadow-lg transition-transform duration-300 ${g?"translate-x-0":"-translate-x-full lg:translate-x-0"} fixed z-30 h-full overflow-y-auto lg:relative`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"flex items-center text-xl font-semibold text-gray-900",children:[e.jsx(M,{size:20,className:"mr-2 text-emerald-600"}),"Filter"]}),e.jsx(p,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>t(!1),children:"×"})]}),e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kategori Laporan"}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{placeholder:"Semua kategori"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Kategori"}),e.jsx(a,{value:"pencemaran-air",children:"Pencemaran Air"}),e.jsx(a,{value:"pencemaran-laut",children:"Pencemaran Laut"}),e.jsx(a,{value:"kerusakan-hutan",children:"Kerusakan Hutan"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status Laporan"}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{placeholder:"Semua status"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Status"}),e.jsx(a,{value:"menunggu",children:"Menunggu"}),e.jsx(a,{value:"progress",children:"Dalam Progress"}),e.jsx(a,{value:"selesai",children:"Selesai"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provinsi"}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{placeholder:"Semua Provinsi"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Provinsi"}),n.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kota"}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{placeholder:"Semua Kota"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Kota"}),l.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kecamatan"}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{placeholder:"Semua Kecamatan"})}),e.jsxs(u,{children:[e.jsx(a,{value:"semua",children:"Semua Kecamatan"}),i.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(p,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:"Terapkan Filter"}),e.jsx(p,{variant:"outline",className:"flex-1",children:"Reset Filter"})]})]})]})}),e.jsxs("div",{className:"relative flex-1",children:[e.jsxs(P,{center:[-2.5489,118.0149],zoom:5,scrollWheelZoom:!0,className:"z-10 w-full h-full",children:[e.jsx(L,{attribution:'© <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),h.map(s=>{var m,r;return e.jsx(z,{position:[s.latitude,s.longitude],children:e.jsx(U,{className:"custom-popup",minWidth:280,maxWidth:320,closeButton:!0,autoPan:!0,children:e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-emerald-500 to-teal-600",children:[(m=s.media)!=null&&m[0]?(r=s.media[0].media_type)!=null&&r.startsWith("video")?e.jsxs("div",{className:"relative w-full h-full bg-black",children:[e.jsx("video",{className:"object-cover w-full h-full opacity-50",src:`/storage/${s.media[0].media_url}`,muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"p-2 rounded-full bg-white/80",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-5.197-3.03A1 1 0 008 9.03v5.94a1 1 0 001.555.832l5.197-3.03a1 1 0 000-1.664z"})})})})]}):e.jsx("img",{src:`/storage/${s.media[0].media_url}`,alt:s.title,className:"object-cover w-full h-full"}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-800",children:e.jsx("svg",{className:"w-8 h-8 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx(j,{className:`${w(s.status)} text-xs font-medium shadow-sm`,children:s.status})}),s.hasMission&&e.jsx("div",{className:"absolute left-2 top-2",children:e.jsx(j,{className:"text-xs font-medium text-white bg-blue-500 shadow-sm",children:"Ada Misi"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx(j,{variant:"outline",className:"text-xs font-medium text-gray-700 border-gray-200 bg-gray-50",children:s.category})}),e.jsx("h3",{className:"mb-3 text-base font-semibold leading-tight text-gray-900 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-start mb-3 text-sm text-gray-600",children:[e.jsx(B,{size:14,className:"mr-2 mt-0.5 flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"line-clamp-2",children:s.address})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{size:12,className:"mr-1"}),e.jsx("span",{children:s.created_at})]}),e.jsxs("div",{className:"flex items-center text-emerald-600",children:[e.jsx(T,{size:12,className:"mr-1"}),e.jsx("span",{className:"font-medium",children:s.upvotes_count||0})]})]}),e.jsxs(p,{size:"sm",onClick:()=>c(s.id),className:"w-full text-white transition-colors duration-200 bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(K,{size:14,className:"mr-2"}),"Lihat Detail"]})]})]})})},s.id)})]}),e.jsx("div",{className:"absolute z-20 bottom-4 right-4",children:e.jsx(b,{className:"shadow-lg bg-white/90 backdrop-blur-sm",children:e.jsxs(y,{className:"p-3 text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[h.length," Laporan Ditemukan"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Klik marker untuk lihat detail"})]})})})]})]})};export{Z as M};
