import{r as n,j as e,S as V}from"./app-CoH15XZe.js";import{C as x,b as H,d as A,a as C,B as d,I as D}from"./index-CJhcQlSm.js";import{S as _,a as S,b as T,c as L,d as c}from"./select-qH8VTgrm.js";import{g as M,b as P,R}from"./RenderHtml-CTUnEmzk.js";import{a as K}from"./formatDate-DdkzSpcV.js";import{B as h}from"./Footer-BKK-BSje.js";import{S as I}from"./sliders-horizontal-BicjGVX4.js";import{R as W}from"./refresh-ccw-DWpdoJLu.js";import{S as $}from"./search-CtF3rUwp.js";import{P as O}from"./play-D95gP-th.js";import{C as Q}from"./calendar-WlEt72KO.js";import{E as J}from"./eye-DNmXCH6Y.js";const ie=({onViewDetails:z,contents:m})=>{const[i,B]=n.useState("newest"),[t,o]=n.useState(""),[u,F]=n.useState(m),[l,p]=n.useState({content_type:"semua"}),j=(s,a)=>{p(r=>({...r,[s]:a}))},g=()=>{p({content_type:"semua"}),o("")};n.useEffect(()=>{let s=[...m];t.trim()&&(s=s.filter(a=>a.title.toLowerCase().includes(t.toLowerCase()))),l.content_type!=="semua"&&(s=s.filter(a=>a.content_type.toLowerCase()===l.content_type.toLowerCase())),i==="newest"?s.sort((a,r)=>new Date(r.created_at).getTime()-new Date(a.created_at).getTime()):i==="oldest"?s.sort((a,r)=>new Date(a.created_at).getTime()-new Date(r.created_at).getTime()):i==="title"&&s.sort((a,r)=>a.title.localeCompare(r.title)),F(s)},[m,t,i,l]);const E=[{label:"Artikel",value:"artikel"},{label:"Modul PDF",value:"modul"},{label:"Video",value:"video"}],f=t.trim()||l.content_type!=="semua";return e.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"Konten Edukasi"}),e.jsx("p",{className:"text-gray-600",children:"Pelajari berbagai topik lingkungan untuk meningkatkan kesadaran Anda"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(x,{className:"sticky top-24",children:[e.jsx(H,{children:e.jsxs(A,{className:"flex items-center justify-between text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{size:20,className:"mr-2 text-emerald-600"}),"Filter Konten"]}),f&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-emerald-100 text-emerald-600",children:"Aktif"})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipe Konten"}),e.jsxs(_,{value:l.content_type,onValueChange:s=>j("content_type",s),children:[e.jsx(S,{children:e.jsx(T,{placeholder:"Pilih tipe"})}),e.jsxs(L,{children:[e.jsx(c,{value:"semua",children:"Semua Tipe"}),E.map(s=>e.jsx(c,{value:s.value,children:s.label},s.value))]})]})]}),e.jsx("div",{className:"pt-4 space-y-2",children:e.jsxs(d,{variant:"outline",className:"flex items-center justify-center w-full gap-2",onClick:g,disabled:!f,children:[e.jsx(W,{className:"w-4 h-4"}),"Reset Filter"]})})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 mb-6 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(_,{value:i,onValueChange:B,children:[e.jsx(S,{className:"w-48",children:e.jsx(T,{placeholder:"Urutkan berdasarkan"})}),e.jsxs(L,{children:[e.jsx(c,{value:"newest",children:"Terbaru"}),e.jsx(c,{value:"oldest",children:"Terlama"}),e.jsx(c,{value:"title",children:"Judul A-Z"})]})]})}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx($,{className:"absolute w-4 h-4 text-gray-400 left-3 top-3"}),e.jsx(D,{placeholder:"Cari konten...",className:"pl-10",value:t,onChange:s=>o(s.target.value)})]})]}),(l.content_type!=="semua"||t)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"mr-2 text-sm font-medium text-gray-700",children:"Filter aktif:"}),t&&e.jsxs(h,{variant:"secondary",className:"flex items-center gap-1",children:['Pencarian: "',t,'"',e.jsx("button",{onClick:()=>o(""),className:"ml-1 text-xs",children:"×"})]}),l.content_type!=="semua"&&e.jsxs(h,{variant:"secondary",className:"flex items-center gap-1",children:["Kategori: ",l.content_type,e.jsx("button",{onClick:()=>j("content_type","semua"),className:"ml-1 text-xs",children:"×"})]})]}),u.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:u.map(s=>{var a,r,v,y,N,b,w,k;return e.jsxs(x,{className:"transition-all duration-300 border-0 shadow-md cursor-pointer group hover:-translate-y-1 hover:shadow-lg",onClick:()=>z(s.id),children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-lg",children:[(v=(r=(a=s.media)==null?void 0:a[0])==null?void 0:r.media_type)!=null&&v.startsWith("video")?e.jsxs("div",{className:"relative w-full h-48 bg-black",children:[e.jsx("video",{className:"object-cover w-full h-full opacity-50",src:`/storage/${s.media[0].media_url}`,muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"p-2 rounded-full bg-white/80",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-5.197-3.03A1 1 0 008 9.03v5.94a1 1 0 001.555.832l5.197-3.03a1 1 0 000-1.664z"})})})})]}):((N=(y=s.media)==null?void 0:y[0])==null?void 0:N.media_type)==="document"?e.jsx("div",{className:"flex items-center justify-center w-full h-48 bg-gray-100",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-emerald-600",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 2a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6H6zm7 1.5L18.5 9H13V3.5zM8 13h8v2H8v-2zm0 4h5v2H8v-2z"})})}):e.jsx("img",{src:`/storage/${(w=(b=s.media)==null?void 0:b[0])==null?void 0:w.media_url}`,alt:s.title,className:"object-cover w-full h-48 transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(h,{className:M(s.content_type),children:e.jsx("div",{className:"flex items-center gap-1",children:P(s.content_type)})})}),s.content_type==="Video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-opacity opacity-0 bg-black/20 group-hover:opacity-100",children:e.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-white/90",children:e.jsx(O,{size:24,className:"ml-1 text-emerald-600"})})})]}),e.jsxs(C,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 font-semibold text-gray-900 transition-colors line-clamp-2 group-hover:text-emerald-600",children:s.title}),e.jsx("div",{className:"mb-3 text-sm text-gray-600 line-clamp-2",children:e.jsx(R,{htmlString:s.body,className:"leading-relaxed text-gray-700"})}),e.jsx("div",{className:"flex items-center justify-between mb-3 text-xs text-gray-500",children:e.jsxs("span",{children:["Oleh: ",(k=s.author)==null?void 0:k.name]})}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Q,{size:14,className:"mr-1"}),e.jsx("span",{children:K(s.created_at)})]})}),e.jsxs(d,{className:"w-full mt-auto transition-colors duration-200 bg-amber-500 hover:bg-amber-700",onClick:()=>V.visit(`/content/${s.id}`),children:[e.jsx(J,{size:16,className:"mr-2"}),"Lihat Detail"]})]})]},s.id)})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(d,{variant:"outline",size:"lg",className:"min-w-32",children:"Muat Lebih Banyak"})})]}):e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs(x,{className:"w-full px-8 py-32 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:t||l.content_type!=="semua"?"Tidak Ada Konten Edukasi yang Sesuai Filter":"Konten Edukasi Belum Tersedia"}),e.jsx("p",{className:"text-sm text-gray-500",children:t||l.content_type!=="semua"?"Coba ubah atau hapus beberapa filter untuk melihat lebih banyak konten edukasi.":"Belum ada konten edukasi yang tersedia saat ini."}),(t||l.content_type!=="semua")&&e.jsx(d,{variant:"outline",className:"mt-4",onClick:g,children:"Reset Semua Filter"})]})})]})]})]})};export{ie as E};
