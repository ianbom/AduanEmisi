import{r as S,j as e,S as k,J as C}from"./app-CEf6-TVv.js";import{T as M,C as B}from"./CitizenLayout-BJCqtu_4.js";import{C as h,b as P,d as T,a as w,I as u,B as i}from"./index-T59oawn7.js";import{S as c,a as n,b as d,c as m,d as a}from"./select-D_0_1Ftm.js";import{a as z}from"./formatDate-DdkzSpcV.js";import{g as D}from"./missionStatusColor-DKcarvt-.js";import{B as L}from"./Badge-DaU8GyFg.js";import{F,E as A}from"./filter-C-AgaYYg.js";import{S as E}from"./search-Eq9PLU5C.js";import{M as K}from"./map-pin-CvMsSeln.js";import{C as V}from"./calendar-BDxQ4HCg.js";import"./index-BYYFiwgR.js";const _=({missions:l,myMissions:t,onViewDetails:x})=>{const[o,r]=S.useState("newest");return e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8 flex flex-col items-start justify-between md:flex-row md:items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:t?"Misi yang Diikuti":"Daftar Misi"})}),e.jsx("p",{className:"text-gray-600",children:"Temukan Misi dan jadilah bagian dalam aksi penyelamatan lingkungan"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(h,{className:"sticky top-24",children:[e.jsx(P,{children:e.jsxs(T,{className:"flex items-center text-lg",children:[e.jsx(F,{size:20,className:"mr-2 text-emerald-600"}),"Filter Laporan"]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kategori"}),e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(d,{placeholder:"Pilih kategori"})}),e.jsxs(m,{children:[e.jsx(a,{value:"semua",children:"Semua Kategori"}),e.jsx(a,{value:"pencemaran-air",children:"Pencemaran Air"}),e.jsx(a,{value:"pencemaran-laut",children:"Pencemaran Laut"}),e.jsx(a,{value:"kerusakan-hutan",children:"Kerusakan Hutan"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(d,{placeholder:"Pilih status"})}),e.jsxs(m,{children:[e.jsx(a,{value:"semua",children:"Semua Status"}),e.jsx(a,{value:"menunggu",children:"Menunggu"}),e.jsx(a,{value:"progress",children:"Dalam Progress"}),e.jsx(a,{value:"selesai",children:"Selesai"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provinsi"}),e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(d,{placeholder:"Pilih provinsi"})}),e.jsxs(m,{children:[e.jsx(a,{value:"semua",children:"Semua Provinsi"}),e.jsx(a,{value:"bali",children:"Bali"}),e.jsx(a,{value:"jabar",children:"Jawa Barat"}),e.jsx(a,{value:"jakarta",children:"DKI Jakarta"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tanggal Mulai"}),e.jsx(u,{type:"date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tanggal Selesai"}),e.jsx(u,{type:"date"})]})]}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(i,{className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"Terapkan Filter"}),e.jsx(i,{variant:"outline",className:"w-full",children:"Reset Filter"})]})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(c,{value:o,onValueChange:r,children:[e.jsx(n,{className:"w-48",children:e.jsx(d,{placeholder:"Urutkan berdasarkan"})}),e.jsxs(m,{children:[e.jsx(a,{value:"newest",children:"Terbaru"}),e.jsx(a,{value:"popular",children:"Terpopuler"}),e.jsx(a,{value:"status",children:"Status"})]})]})}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(E,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(u,{placeholder:"Cari laporan...",className:"pl-10"})]})]}),l.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:l.map(s=>{var j,p,g,v,N,f,b;return e.jsxs(h,{className:"group cursor-pointer border-0 shadow-md transition-all duration-300 hover:-translate-y-1 hover:shadow-lg",onClick:()=>{var y;return x((y=s.report)==null?void 0:y.id)},children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-lg",children:[(g=(p=(j=s.report.media)==null?void 0:j[0])==null?void 0:p.media_type)!=null&&g.startsWith("video")?e.jsxs("div",{className:"relative h-48 w-full bg-black",children:[e.jsx("video",{className:"h-full w-full object-cover opacity-50",src:`/storage/${s.report.media[0].media_url}`,muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"rounded-full bg-white/80 p-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-5.197-3.03A1 1 0 008 9.03v5.94a1 1 0 001.555.832l5.197-3.03a1 1 0 000-1.664z"})})})})]}):e.jsx("img",{src:`/storage/${s.thumbnail_url}`,alt:s.title,className:"h-48 w-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx(L,{className:D(s.status),children:s.status})})]}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 line-clamp-2 font-semibold text-gray-900 transition-colors group-hover:text-emerald-600",children:s.title}),e.jsx("p",{className:"mb-3 line-clamp-2 text-sm text-gray-600",children:s.description}),e.jsx("div",{className:"mb-3 flex items-center justify-between text-xs text-gray-500",children:e.jsxs("span",{children:["Oleh:"," ",(v=s.creator)==null?void 0:v.name]})}),e.jsxs("div",{className:"mb-3 flex items-center text-sm text-gray-500",children:[e.jsx(K,{size:14,className:"mr-1"}),e.jsxs("span",{className:"truncate",children:[(N=s.district)==null?void 0:N.name,","," ",(f=s.city)==null?void 0:f.name,","," ",(b=s.province)==null?void 0:b.name]})]}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(V,{size:14,className:"mr-1"}),e.jsx("span",{children:z(s.created_at)})]})}),e.jsxs(i,{className:"mt-auto w-full bg-amber-500 transition-colors duration-200 hover:bg-amber-700",onClick:()=>k.visit(`/report/${s.id}`),children:[e.jsx(A,{size:16,className:"mr-2"}),"Lihat Detail"]})]})]},s.id)})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(i,{variant:"outline",size:"lg",className:"min-w-32",children:"Muat Lebih Banyak"})})]}):e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs(h,{className:"w-full px-8 py-32 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"rounded-full bg-gray-100 p-4",children:e.jsx(M,{size:32,className:"h-12 w-12 text-gray-400"})})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:t?"Anda Belum Memiliki Misi":"Misi Belum Tersedia"}),e.jsx("p",{className:"text-sm text-gray-500",children:t?"Anda belum memiliki misi. Silahkan mendaftar misi terlebih dahulu.":"Belum ada misi yang tersedia saat ini. Coba lagi nanti."})]})})]})]})]})},Y=()=>{var r;const{props:l}=C(),t=((r=l.missions)==null?void 0:r.data)||[],x=l.myMissions,o=s=>{s?k.visit(route("report.show",{id:s})):alert("Laporan tidak tersedia untuk misi ini.")};return e.jsx(B,{currentPage:"mission",children:e.jsx(_,{myMissions:x,missions:t,onViewDetails:o})})};export{Y as default};
